<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/styles.css" />
    <title>Notifications</title>
  </head>
  <body>
    <div class="nav">
      <div class="title">
          <h1> Bienvenido! </h1>
      </div>
      <div class="icon" id="icon" data-count="0">
          <i id='bell' class="fas fa-bell"></i>
      </div>
    </div>
    <div class="wrapper">
      <button class="btn active-modal" id="btnActiveModal">Click here!</button>
    </div>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <img src="./img/lorem.png" width="100vw" height="100vh"/>
    <div class="overlay " id="overlay">
      <div class="modal" id="modal">
        <div class="header-modal">
            <button class="btn secondary" id="btnHideModal">X</button>
        </div>
        <h1>Este es un ejemplo de modal</h1>
        <p>¿Quieres enviarte una notificación?</p>
        <div class="buttons-group">
            <button class="btn primary" id="btnNotifyModal">Si</button>
            <button class="btn secondary" id="btnCloseModal" >No</button>
        </div>
      </div>
    </div>
    <script>
      const $btnHideModal = document.getElementById('btnHideModal');
      //console.log($btnHideModal);
      const $modal = document.getElementById('modal');
      //console.log($modal);
      const $overlay = document.getElementById('overlay');
      //console.log($overlay);
      const $btnActiveModal = document.getElementById('btnActiveModal');
      //console.log($btnActiveModal);
      const $btnNotifyModal = document.getElementById('btnNotifyModal');
      //console.log($btnCloseModal);
      const $btnCloseModal = document.getElementById('btnCloseModal');
      //console.log($btnCloseModal);
      const $icon = document.getElementById('icon');
      console.log($icon);
      const $bell = document.getElementById('bell');
      console.log($bell);

      $btnActiveModal.addEventListener('click',(event)=>{
        $modal.style.animation = 'in 0.8s';
        $overlay.classList.add('active');
      });
      $btnHideModal.addEventListener('click', (event)=>{
        console.log(event);
        $modal.style.animation = 'out 0.8s forwards';
        $overlay.classList.remove('active');
      });
      $btnNotifyModal.addEventListener('click', (event)=>{
        console.log(event);
        const count = Number($icon.getAttribute('data-count')) || 0;
        $icon.setAttribute('data-count', count+1);
        $icon.classList.add('notify');
        $bell.classList.add('animate-notification');
      });
      $btnCloseModal.addEventListener('click', (event)=>{
        console.log(event);
        $modal.style.animation = 'out 0.8s forwards';
        $overlay.classList.remove('active');
      });
      $bell.addEventListener('animationend', ()=>{
        $bell.classList.remove('animate-notification');
      });
    </script>
  </body>
</html>
